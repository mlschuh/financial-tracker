<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Four Quadrants with Split.js - Enhanced Gutter</title>
    <style>
      html,
      body {
        height: 100%;
        margin: 0;
        overflow: hidden;
        font-family: sans-serif;
      }

      #split-container {
        display: flex;
        flex-direction: column;
        height: 100%;
      }

      .split-horizontal,
      .split-vertical {
        display: flex;
        flex-direction: row; /* For horizontal splits */
        height: 100%; /* Ensures top/bottom halves take full height */
        width: 100%; /* Ensures left/right quadrants take full width */
      }

      .quadrant {
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        font-size: 12px;
        color: white;
        box-sizing: border-box; /* Include padding and border in the element's total width and height */
      }

      /* Styles for each quadrant to make them visually distinct */
      #calendar-quadrant {
        background-color: #ff5733; /* Red-orange */
      }
      #event-list-quadrant {
        background-color: #33ff57; /* Green */
      }
      #quadrant-3 {
        background-color: #3357ff; /* Blue */
      }
      #quadrant-4 {
        background-color: #ff33c4; /* Pink */
      }
      .split {
        display: flex;
        flex-direction: row;
      }

      .gutter {
        background-color: #eee;
        background-repeat: no-repeat;
        background-position: 50%;
      }

      .gutter.gutter-horizontal {
        background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAeCAYAAADkftS9AAAAIklEQVQoU2M4c+bMfxAGAgYYmwGrIIiDjrELjpo5aiZeMwF+yNnOs5KSvgAAAABJRU5ErkJggg==");
        cursor: col-resize;
      }
    </style>
    <script src="https://unpkg.com/htmx.org"></script>
    <!-- <link
      href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.11/main.min.css"
      rel="stylesheet"
    /> -->

    <!-- Grab all of the calendar stuff -->
    <script src="https://cdn.jsdelivr.net/npm/rrule@2.6.4/dist/es5/rrule.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.11/index.global.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@fullcalendar/rrule@6.1.11/index.global.min.js"></script>
  </head>
  <body>
    <div id="split-container">
      <div class="split-horizontal" id="top-half">
        <div
          class="quadrant"
          id="calendar-quadrant"
          hx-get="/fullcalendar.html?selectedEvent={{.SelectedEvent}}"
          hx-trigger="load, eventSelected"
        ></div>
        <div
          class="quadrant"
          id="event-list-quadrant"
          hx-get="/eventList.html?selectedEvent={{.SelectedEvent}}"
          hx-trigger="load, eventSelected"
        ></div>
      </div>
      <div class="split-horizontal" id="bottom-half">
        <div class="quadrant" id="quadrant-3">
          hello {{ template "chartjs.html" . }}
        </div>
        <div class="quadrant" id="quadrant-4">{{ template "edit.html" . }}</div>
      </div>
    </div>

    <!-- Include Split.js from a CDN -->
    <script src="https://unpkg.com/split.js/dist/split.min.js"></script>
    <script>
      var sizesTopBottom = localStorage.getItem("split-sizes-top-bottom");

      if (!sizesTopBottom) {
        sizesTopBottom = [50, 50];
      } else {
        sizesTopBottom = JSON.parse(sizesTopBottom);
      }

      const topBottomSplit = Split(["#top-half", "#bottom-half"], {
        direction: "vertical",
        sizes: sizesTopBottom,
        minSize: 100,
        gutterSize: 10,

        onDragEnd: function (sizes) {
          localStorage.setItem("split-sizes-top-bottom", JSON.stringify(sizes));
        },
      });

      let sizesTop = localStorage.getItem("split-sizes-top");

      if (!sizesTop) {
        sizesTop = [50, 50];
      } else {
        sizesTop = JSON.parse(sizesTop);
      }

      const topLeftSplit = Split(
        ["#calendar-quadrant", "#event-list-quadrant"],
        {
          direction: "horizontal",
          sizes: sizesTop,
          minSize: 100,
          gutterSize: 10,
          onDragEnd: function (sizes) {
            localStorage.setItem("split-sizes-top", JSON.stringify(sizes));
          },
        }
      );

      let sizesBottom = localStorage.getItem("split-sizes-bottom");

      if (!sizesBottom) {
        sizesBottom = [50, 50];
      } else {
        sizesBottom = JSON.parse(sizesBottom);
      }

      const bottomLeftSplit = Split(["#quadrant-3", "#quadrant-4"], {
        direction: "horizontal",
        sizes: sizesBottom,
        minSize: 100,
        gutterSize: 10,
        onDragEnd: function (sizes) {
          localStorage.setItem("split-sizes-bottom", JSON.stringify(sizes));
        },
      });
    </script>
  </body>
</html>
